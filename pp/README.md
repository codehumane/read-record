## 책소개

- [생각하는 프로그래밍<sup>Programming Pearls</sup>](http://www.insightbook.co.kr/%EB%8F%84%EC%84%9C-%EB%AA%A9%EB%A1%9D/ppp-%EC%8B%9C%EB%A6%AC%EC%A6%88/%EC%83%9D%EA%B0%81%ED%95%98%EB%8A%94-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D)
- 지은이: 존 벤틀리

# 아하! 알고리즘

문제를 해결하려고 바로 달려들기 보다는, 문제에 대해 좀 더 생각해보고 영감을 얻자는 이야기. 더불어 약간의 게으름을 강조함. 관련하여 두 가지 재미있었던 부분을 기록. 하나는 반전을 활용한 회전 알고리즘이고, 하나는 동치관계에서 원소들을 표시하는 방법.

## 반전을 활용한 회전 알고리즘

텍스트 편집기에서 6\~10번째 라인을 1\~5번째 라인과 바꾸는 기능을 구현한다고 가정해보자. 이때 필요한 알고리즘이 책에서 말하는 회전 알고리즘이며, 아래와 같이 반전을 활용한 해결책을 소개하고 있다. 참고로, 반전 코드는 메모리 사용량이 적고 빠르다고 한다. 게다가 짧고 간단하다.

> 위의 문제를 배열 ab를 변환하여 ba로 만드는 문제라고 생각해 보자. 그리고 배열의 특정 부분의 원소들을 반전시키는 함수가 이미 존재한다고 가정하면, ab에서 시작하여 a를 반전한 a<sup>r</sup>b를 얻을 수 있고, 다시 b를 반전하여 a<sup>r</sup>b<sup>r</sup>을 얻게 된다. a<sup>r</sup>b<sup>r</sup> 전체를 반전하면 (a<sup>r</sup>b<sup>r</sup>)<sup>r</sup>이 되는데, 이것은 정확히 ba와 같다.

그림으로 보면 다음과 같다.

![반전을 활용한 회전 알고리즘](./rotation-by-reverse.jpeg)

이 아이디어가 집합의 연산 규칙을 연상시킨다는 점이 흥미롭기도 했고, 알고리즘이 현실과 그리 멀리 떨어져 있지 않음을 느끼게 해주는 점이 인상 깊다. 실제로 Brian Kernighan과 P.J Plauger라는 사람이 1981년에 텍스트 편집기의 줄 옮기기 기능 구현에 이 알고리즘을 사용했다고 한다.

코드는 간단하다.

```
reverse(0, 4); // 앞 쪽의 5개 라인 반전
reverse(5, 9); // 뒤 쪽의 5개 라인 반전
reverse(0, 9); // 전체 라인 반전
```

## 동치관계에서 원소들을 표현하는 방법

[동치관계<sup>equivalence relation</sup>](https://ko.wikipedia.org/wiki/%EB%8F%99%EC%B9%98%EA%B4%80%EA%B3%84)를 표현할 때, 집합에 포함되는 원소가 같은 표기를 갖도록 하는 부분이 재미있었다. 여기서는 [전철어구](https://ko.wikipedia.org/wiki/어구전철)를 예로 들고 있는데, 내용은 아래와 같다.

> 단어 내의 문자를 정렬하여 하나의 전철어구 집합에 대한 표시를 만들 수 있다. 정렬을 한 후 같은 문자의 개수를 나타내는 것도 표시가 될 수 있다. "Mississippi"의 표시는 "i4m1p2s4" 또는, 1을 생략하여 간단히 "i4mp2s4"로 정의할 수 있다. 또는 26개의 정수로 이루어진 배열을 사용하여 포함된 각 문자의 개수를 표시할 수도 있다. 이런 표시는 FBI에서 지문을 인덱싱하는 방법과, 소리는 같지만 철자는 다른 이름을 구별하기 위해 사용하는 사운덱스<sup>Soundex</sup> 휴리스틱에서도 응용된다.

# 프로그램의 구조를 결정하는 데이터

사용하는 데이터 구조를 올바르게 결정하면, 좀 더 효율적이고 오류가 적은 프로그램이 만들어질 수 있다는 이야기. 제목과 다소 상관성은 떨어진다고 생각하지만, 그래도 생각할 거리를 던져 주었던 "에러 메시지"에 대해 기록함.

## 에러 메시지

그동안 다루던 시스템들은 항상 다국어 처리가 필요했다. 하지만 최근엔 다국어가 필요 없는, 그리고 정말로 앞으로도 없을 것만 같은 시스템을 다루고 있다. 이 경우 [Spring의 MessageSource](http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/context/MessageSource.html)와 같이 메시지 처리를 일원화하는 것이 꼭 필요할까? 개인적으로는 이런 상황에서도, 메시지를 한 곳에서 관리하는 것이 여러 가지 이점을 가져다준다고 믿는다. 하지만 어떤 측면에서는 분명 번거로운 일이기는 하다. 이런 와중에 아래 내용이 이런저런 생각을 다시 하게끔 만들어 준다.

> 지저분한 시스템은 수백 개의 에러 메시지가 코드 여기저기에 흩어져 있고, 다른 출력문과 섞여 있다. (중략) 다음 작업을 수행하는 데 있어서의 어려움을 생각해보라.
>
> - 모든 가능한 에러 메시지에 대한 리스트를 만들라.
> - 모든 "심각한" 에러 메시지에 대해 경고음을 발생시키도록 변경하라.
> - 에러 메시지를 프랑스어나 독일어로 번역하라.

